Руководство пользователя
=======================

Запуск программы
---------------

Для запуска программы выполните:

.. code-block:: bash

   python main.py

Главное меню
-----------

После запуска откроется главное меню с опциями:

1. **Выбрать раскладку для тестирования** - основная функция программы
2. **Выход из программы** - завершение работы

Выбор раскладки
--------------

В меню выбора раскладки вы увидите:

* Список доступных раскладок в базе данных
* Возможность выбрать раскладку для анализа
* Переход к меню обработки файлов

Обработка файлов
---------------

После выбора раскладки доступны следующие опции:

Обработка файла со словами
~~~~~~~~~~~~~~~~~~~~~~~~~

* Анализирует файл, где каждая строка содержит отдельное слово
* Подходит для словарей и списков слов
* Собирает статистику по пальцам - нагрузка на каждый палец
* Автоматически выбирает оптимальный метод обработки

Обработка текстового файла
~~~~~~~~~~~~~~~~~~~~~~~~~

* Анализирует сплошной текст
* Подходит для книг, статей, документов
* Автоматически подсчитывает количество слов
* Собирает детальную статистику по символам и пальцам

Новый формат правил раскладки
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Теперь поддерживается расширенный формат правил:

* **Старый формат**: ``{'а': 1}`` - только штраф
* **Новый формат**: ``{'а': [1, 'ly']}`` - [штраф, код_пальца]

Коды пальцев:

* ``ly`` - левый указательный
* ``ry`` - правый указательный  
* ``ls`` - левый средний
* ``rs`` - правый средний
* ``lb`` - левый безымянный
* ``rb`` - правый безымянный
* ``lm`` - левый мизинец
* ``rm`` - правый мизинец
* ``bl`` - пробел (большие пальцы)

Работа с большими файлами
------------------------

Программа автоматически определяет размер файла и выбирает оптимальный метод обработки:

* **Файлы до 10 MB** - загружаются в память полностью
* **Файлы 10-50 MB** - обрабатываются потоково с предупреждением
* **Файлы свыше 50 MB** - требуют подтверждения пользователя

Результаты анализа
-----------------

После обработки файла отображается подробная статистика:

Основные метрики
~~~~~~~~~~~~~~~

* **Обработано слов** - количество проанализированных слов
* **Всего символов** - общее количество символов в файле
* **Обработано символов** - символы, для которых есть правила в раскладке
* **Общее количество ошибок** - суммарное количество ошибок

Средние значения
~~~~~~~~~~~~~~~

* **Среднее ошибок на слово** - средняя сложность слов
* **Среднее ошибок на символ** - средняя сложность символов
* **Покрытие раскладкой** - процент символов, покрытых правилами

Оценка качества
~~~~~~~~~~~~~~

Программа автоматически оценивает качество раскладки:

* **ОТЛИЧНО** - менее 2 ошибок на слово
* **ХОРОШО** - 2-5 ошибок на слово  
* **СРЕДНЕ** - 5-10 ошибок на слово
* **ПЛОХО** - более 10 ошибок на слово

Сохранение результатов
---------------------

После анализа можно:

1. **Сохранить в базу данных** - для истории и сравнения
2. **Экспортировать в CSV** - для внешнего анализа  
3. **Создать графики** - визуализация результатов
4. **Экспортировать неизвестные символы** - для улучшения раскладки
5. **Анализировать статистику пальцев** - нагрузка на каждый палец

Статистика пальцев
~~~~~~~~~~~~~~~~~~

Программа теперь сохраняет детальную статистику по пальцам:

* **Нагрузка на каждый палец** - количество нажатий
* **Сравнение раскладок** - какая раскладка лучше распределяет нагрузку
* **Визуализация** - графики и диаграммы распределения нагрузки

История анализов
---------------

В разделе "История анализов" можно:

* Просмотреть статистику по раскладке
* Увидеть последние тесты
* Сравнить результаты разных файлов

Создание графиков
----------------

Доступны различные типы графиков:

* **Круговые диаграммы** - сравнение нагрузок на руки и двуручия
* **Гистограммы** - сравнение нагрузок и штрафов на пальцы
* **Линейные графики** - анализ нагрузок по типам пальцев
* **Специализированные графики пальцев** - детальная статистика по каждому пальцу
* **Сравнительные диаграммы** - сравнение нескольких раскладок

Загрузка раскладки из файла
--------------------------

Можно загрузить собственную раскладку:

1. Подготовьте файл с раскладкой в нужном формате
2. Выберите "Загрузить раскладку из файла"
3. Укажите путь к файлу
4. Программа проверит корректность и предложит сохранить в БД

Советы по использованию
----------------------

* Используйте файлы в кодировке UTF-8 для лучшей совместимости
* Для больших файлов убедитесь в наличии достаточного места на диске
* Регулярно сохраняйте результаты в базу данных для анализа прогресса
* Создавайте графики для визуального сравнения раскладок